/*!
 *   Student Home Bulletin Page JavaScript v1.0.0
 *   Author: Danvic712
 */
$.dataTableSetting={bSort:!1,serverSide:!0,sServerMethod:"POST",bDeferRender:!0,sScrollXInner:"100%",bLengthChange:!1,bFilter:!1,bStateSave:!0,bProcessing:!0,iDisplayLength:15,deferRender:!0,oLanguage:{sLengthMenu:"每页显示 _MENU_ 条记录",sZeroRecords:"对不起，没有匹配的数据",sInfo:"第 _START_ - _END_ 条 / 共 _TOTAL_ 条数据",sInfoEmpty:"没有匹配的数据",sInfoFiltered:"(数据表中共 _MAX_ 条记录)",sProcessing:"正在加载中...",sSearch:"全文搜索：",oPaginate:{sFirst:"第一页",sPrevious:" 上一页 ",sNext:" 下一页 ",sLast:" 最后一页 "}},paging:!0,processing:!0,columnDefs:[{targets:7,data:null,render:function(n){return'<a id="detail" class="btn btn-xs btn-link" data-id='+n.id+">查看<\/a>"}}],columns:[{data:"id"},{data:"title"},{data:"content"},{data:"typeStr"},{data:"targetStr"},{data:"dateTime"},{data:"publisher"}],ajax:function(n,t){var i={};i.Limit=n.length;i.Start=n.start;i.Page=n.start/n.length+1;i.STitle=$("#title").val();i.SDateTime=$("#datetime").val();i.SType=$("#type").val();$.ajax({type:"POST",url:"/Student/Home/Search",cache:!1,data:{search:JSON.stringify(i)},dataType:"json",success:function(i){var r={};r.draw=n.draw;r.recordsTotal=i.total;r.recordsFiltered=i.total;r.data=i.data;t(r)},error:function(n){console.log(n.responseText)}})}};$(function(){$(".date-picker").datepicker({autoclose:!0,todayHighlight:!0,language:"zh-CN",format:"yyyy-mm-dd"});var n=$("#bulletin-table").dataTable($.dataTableSetting);$(document).on("click","#search",function(){n.fnDestroy(!1);n=$("#bulletin-table").dataTable($.dataTableSetting)});$(document).on("click","#detail",function(){$.ajax({type:"GET",dataType:"html",url:"/Student/Home/Detail",data:{id:$(this).attr("data-id")},success:function(n){bootbox.dialog({title:"公告详情",message:n})}})})});